#!/usr/bin/env bash

_term() {
  echo "Caught SIGTERM signal!"
  kill -TERM "$child" 2>/dev/null
}

trap _term SIGTERM
trap _term SIGINT
trap _term SIGHUP

echo " _______ _______ ______                              _______ _______ ___ ___  "
echo "|   |   |    ___|   __ \         ______             |    ___|    |  |   |   | "
echo "|   |   |    ___|    __/        |______|            |    ___|       |   |   | "
echo "|_______|___|   |___|                               |_______|__|____|\_____/  "
echo "                                                                              "
echo " _______ _______ _______ _____  _____   _______ ______ _______ ______ _______ "
echo "|   |   |   _   |    |  |     \|     |_|    ___|   __ \   _   |   __ \     __|"
echo "|       |       |       |  --  |       |    ___|   __ <       |      <__     |"
echo "|___|___|___|___|__|____|_____/|_______|_______|______/___|___|___|__|_______|"
echo ""


echo "------------------------------------------------------------------------------"
echo "Executing Handlebars Render pass"
echo "------------------------------------------------------------------------------"
node handlebars
echo "------------------------------------------------------------------------------"
echo "Starting Server"
echo "------------------------------------------------------------------------------"
node server &

child=$!

wait "$child"
